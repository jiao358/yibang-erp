# 业务交互接口整理

## 概述

本文档整理了易邦ERP系统的完整业务逻辑API交互，包括前端调用、后端接口、请求参数、响应格式以及对应的代码位置。

## 1. 用户认证模块

### 1.1 用户登录
- **前端调用**: `frontend/src/api/auth.ts`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/auth/AuthController.java`
- **请求**: `POST /api/auth/login`
- **请求参数**:
```typescript
{
  username: string
  password: string
}
```
- **响应**:
```typescript
{
  token: string
  user: {
    id: number
    username: string
    realName: string
    email: string
    phone: string
    role: string
    companyId: number
  }
}
```

### 1.2 用户注册
- **前端调用**: `frontend/src/api/auth.ts`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/auth/AuthController.java`
- **请求**: `POST /api/auth/register`
- **请求参数**:
```typescript
{
  username: string
  password: string
  realName: string
  email: string
  phone: string
  role: string
  companyId: number
}
```

### 1.3 获取当前用户信息
- **前端调用**: `frontend/src/api/auth.ts`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/auth/AuthController.java`
- **请求**: `GET /api/auth/me`

## 2. 用户管理模块

### 2.1 获取用户列表
- **前端调用**: `frontend/src/api/user.ts` - `getUserList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/UserController.java`
- **请求**: `GET /api/users`
- **请求参数**:
```typescript
{
  current: number
  size: number
  username?: string
  personalCompanyName?: string
  email?: string
  phone?: string
  roleName?: string
  status?: string
  companyId?: number
}
```
- **响应**:
```typescript
{
  records: User[]
  total: number
  current: number
  size: number
  pages: number
}
```

### 2.2 创建用户
- **前端调用**: `frontend/src/api/user.ts` - `createUser()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/UserController.java`
- **请求**: `POST /api/users`
- **请求参数**: `Partial<User>`

### 2.3 更新用户
- **前端调用**: `frontend/src/api/user.ts` - `updateUser()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/UserController.java`
- **请求**: `PUT /api/users/{id}`
- **请求参数**: `Partial<User>`

### 2.4 删除用户
- **前端调用**: `frontend/src/api/user.ts` - `deleteUser()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/UserController.java`
- **请求**: `DELETE /api/users/{id}`

### 2.5 重置用户密码
- **前端调用**: `frontend/src/api/user.ts` - `resetPassword()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/UserController.java`
- **请求**: `POST /api/users/{id}/reset-password`
- **请求参数**:
```typescript
{
  newPassword: string
  confirmPassword: string
}
```

## 3. 角色管理模块

### 3.1 获取角色列表
- **前端调用**: `frontend/src/api/role.ts` - `getRoleList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/RoleController.java`
- **请求**: `GET /api/roles`
- **响应**: `Role[]`

### 3.2 创建角色
- **前端调用**: `frontend/src/api/role.ts` - `createRole()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/RoleController.java`
- **请求**: `POST /api/roles`
- **请求参数**: `Role`

### 3.3 更新角色
- **前端调用**: `frontend/src/api/role.ts` - `updateRole()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/RoleController.java`
- **请求**: `PUT /api/roles/{id}`
- **请求参数**: `Role`

### 3.4 删除角色
- **前端调用**: `frontend/src/api/role.ts` - `deleteRole()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/RoleController.java`
- **请求**: `DELETE /api/roles/{id}`

## 4. 公司管理模块

### 4.1 获取公司列表
- **前端调用**: `frontend/src/api/company.ts` - `getCompanyList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CompanyController.java`
- **请求**: `GET /api/companies`
- **响应**: `Company[]`

### 4.2 创建公司
- **前端调用**: `frontend/src/api/company.ts` - `createCompany()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CompanyController.java`
- **请求**: `POST /api/companies`
- **请求参数**: `Company`

### 4.3 更新公司
- **前端调用**: `frontend/src/api/company.ts` - `updateCompany()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CompanyController.java`
- **请求**: `PUT /api/companies/{id}`
- **请求参数**: `Company`

### 4.4 删除公司
- **前端调用**: `frontend/src/api/company.ts` - `deleteCompany()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CompanyController.java`
- **请求**: `DELETE /api/companies/{id}`

## 5. 客户管理模块

### 5.1 获取客户列表
- **前端调用**: `frontend/src/api/customer.ts` - `getCustomerList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `GET /api/customers`
- **响应**: `Customer[]`

### 5.2 创建客户
- **前端调用**: `frontend/src/api/customer.ts` - `createCustomer()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `POST /api/customers`
- **请求参数**: `Customer`

### 5.3 更新客户
- **前端调用**: `frontend/src/api/customer.ts` - `updateCustomer()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `PUT /api/customers/{id}`
- **请求参数**: `Customer`

### 5.4 删除客户
- **前端调用**: `frontend/src/api/customer.ts` - `deleteCustomer()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `DELETE /api/customers/{id}`

### 5.5 根据客户编码获取客户
- **前端调用**: `frontend/src/api/customer.ts` - `getCustomerByCode()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `GET /api/customers/code/{customerCode}`
- **响应**: `Customer`

### 5.6 搜索客户
- **前端调用**: `frontend/src/api/customer.ts` - `searchCustomers()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CustomerController.java`
- **请求**: `GET /api/customers/search`
- **请求参数**: `{ keyword: string }`
- **响应**: `Customer[]`

## 6. 产品管理模块

### 6.1 获取产品列表
- **前端调用**: `frontend/src/api/product.ts` - `getProductList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/ProductController.java`
- **请求**: `GET /api/products`
- **请求参数**:
```typescript
{
  current: number
  size: number
  productName?: string
  categoryId?: number
  brandId?: number
  status?: string
}
```
- **响应**:
```typescript
{
  records: Product[]
  total: number
  current: number
  size: number
  pages: number
}
```

### 6.2 创建产品
- **前端调用**: `frontend/src/api/product.ts` - `createProduct()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/ProductController.java`
- **请求**: `POST /api/products`
- **请求参数**: `Product`

### 6.3 更新产品
- **前端调用**: `frontend/src/api/product.ts` - `updateProduct()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/ProductController.java`
- **请求**: `PUT /api/products/{id}`
- **请求参数**: `Product`

### 6.4 删除产品
- **前端调用**: `frontend/src/api/product.ts` - `deleteProduct()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/ProductController.java`
- **请求**: `DELETE /api/products/{id}`

### 6.5 获取产品分类
- **前端调用**: `frontend/src/api/product.ts` - `getProductCategories()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/CategoryController.java`
- **请求**: `GET /api/categories`
- **响应**: `Category[]`

### 6.6 获取产品品牌
- **前端调用**: `frontend/src/api/product.ts` - `getProductBrands()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/BrandController.java`
- **请求**: `GET /api/brands`
- **响应**: `Brand[]`

## 7. 订单管理模块

### 7.1 获取订单列表
- **前端调用**: `frontend/src/api/order.ts` - `getOrderList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `GET /api/orders`
- **请求参数**:
```typescript
{
  current: number
  size: number
  platformOrderNo?: string
  customerName?: string
  sourceOrderNo?: string
  status?: string
  source?: string
  createdAtStart?: string
  createdAtEnd?: string
  salesUserId?: number
  supplierCompanyId?: number
}
```
- **响应**:
```typescript
{
  records: OrderResponse[]
  total: number
  current: number
  size: number
  pages: number
}
```

### 7.2 创建订单
- **前端调用**: `frontend/src/api/order.ts` - `createOrder()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `POST /api/orders`
- **请求参数**: `OrderRequest`

### 7.3 更新订单
- **前端调用**: `frontend/src/api/order.ts` - `updateOrder()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `PUT /api/orders/{id}`
- **请求参数**: `OrderRequest`

### 7.4 删除订单
- **前端调用**: `frontend/src/api/order.ts` - `deleteOrder()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `DELETE /api/orders/{id}`

### 7.5 审批订单
- **前端调用**: `frontend/src/api/order.ts` - `approveOrder()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `POST /api/orders/{id}/approve`
- **请求参数**:
```typescript
{
  approved: boolean
  approvalNote?: string
}
```

### 7.6 供应商发货
- **前端调用**: `frontend/src/api/order.ts` - `supplierShipOrder()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `POST /api/orders/{id}/supplier-ship`
- **请求参数**:
```typescript
{
  warehouseId: number
  warehouseName: string
  trackingNumber: string
  carrier: string
  shippingMethod?: string
  shippingNotes?: string
  operatorId: number
  operatorName: string
  operatorRole: string
}
```

### 7.7 导出订单
- **前端调用**: `frontend/src/api/order.ts` - `exportOrders()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderController.java`
- **请求**: `POST /api/orders/export`
- **请求参数**:
```typescript
{
  orderIds?: number[]
  exportType: 'selected' | 'all'
  filters?: OrderListRequest
}
```
- **响应**: `Blob` (Excel文件)

## 8. 库存管理模块

### 8.1 获取库存列表
- **前端调用**: `frontend/src/api/inventory.ts` - `getInventoryList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/InventoryController.java`
- **请求**: `GET /api/inventory`
- **请求参数**:
```typescript
{
  current: number
  size: number
  productName?: string
  warehouseId?: number
  lowStock?: boolean
}
```
- **响应**:
```typescript
{
  records: Inventory[]
  total: number
  current: number
  size: number
  pages: number
}
```

### 8.2 更新库存
- **前端调用**: `frontend/src/api/inventory.ts` - `updateInventory()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/InventoryController.java`
- **请求**: `PUT /api/inventory/{id}`
- **请求参数**:
```typescript
{
  quantity: number
  minStockLevel: number
  maxStockLevel: number
}
```

### 8.3 获取库存预警
- **前端调用**: `frontend/src/api/inventory.ts` - `getInventoryAlerts()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/InventoryAlertController.java`
- **请求**: `GET /api/inventory/alerts`
- **响应**: `InventoryAlert[]`

### 8.4 库存盘点
- **前端调用**: `frontend/src/api/inventoryCheck.ts` - `getInventoryCheckList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/InventoryCheckController.java`
- **请求**: `GET /api/inventory/checks`
- **响应**: `InventoryCheck[]`

### 8.5 创建库存盘点
- **前端调用**: `frontend/src/api/inventoryCheck.ts` - `createInventoryCheck()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/InventoryCheckController.java`
- **请求**: `POST /api/inventory/checks`
- **请求参数**: `InventoryCheckRequest`

## 9. 仓库管理模块

### 9.1 获取仓库列表
- **前端调用**: `frontend/src/api/warehouse.ts` - `getWarehouseList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WarehouseController.java`
- **请求**: `GET /api/warehouses`
- **响应**: `Warehouse[]`

### 9.2 创建仓库
- **前端调用**: `frontend/src/api/warehouse.ts` - `createWarehouse()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WarehouseController.java`
- **请求**: `POST /api/warehouses`
- **请求参数**: `Warehouse`

### 9.3 更新仓库
- **前端调用**: `frontend/src/api/warehouse.ts` - `updateWarehouse()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WarehouseController.java`
- **请求**: `PUT /api/warehouses/{id}`
- **请求参数**: `Warehouse`

### 9.4 删除仓库
- **前端调用**: `frontend/src/api/warehouse.ts` - `deleteWarehouse()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WarehouseController.java`
- **请求**: `DELETE /api/warehouses/{id}`

## 10. 价格管理模块

### 10.1 价格策略管理
- **前端调用**: `frontend/src/api/priceStrategy.ts` - `getPriceStrategyList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/PriceStrategyController.java`
- **请求**: `GET /api/price-strategies`
- **响应**: `PriceStrategy[]`

### 10.2 价格分层管理
- **前端调用**: `frontend/src/api/priceTier.ts` - `getPriceTierList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/PriceTierController.java`
- **请求**: `GET /api/price-tiers`
- **响应**: `PriceTier[]`

### 10.3 产品价格配置
- **前端调用**: `frontend/src/api/productPriceConfig.ts` - `getProductPriceConfigs()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/ProductPriceTierConfigController.java`
- **请求**: `GET /api/product-price-configs`
- **响应**: `ProductPriceConfig[]`

### 10.4 销售目标管理
- **前端调用**: `frontend/src/api/salesTarget.ts` - `getSalesTargetList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/SalesTargetController.java`
- **请求**: `GET /api/sales-targets`
- **响应**: `SalesTarget[]`

## 11. AI Excel导入模块

### 11.1 上传Excel文件
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `uploadFile()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `POST /api/ai-excel/upload`
- **请求参数**: `FormData` (包含file)
- **响应**:
```typescript
{
  fileName: string
  fileSize: number
  uploadTime: string
}
```

### 11.2 开始AI处理
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `startProcessing()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `POST /api/ai-excel-orders/process`
- **请求参数**: `FormData`
- **响应**:
```typescript
{
  taskId: string
  status: string
  message: string
}
```

### 11.3 获取处理进度
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `getProgress()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `GET /api/ai-excel-orders/progress/{taskId}`
- **响应**:
```typescript
{
  taskId: string
  status: string
  progress: number
  totalRows: number
  processedRows: number
  successRows: number
  failedRows: number
}
```

### 11.4 获取任务历史
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `getTaskHistory()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `GET /api/ai-excel-orders/tasks`
- **请求参数**:
```typescript
{
  page?: number
  size?: number
  status?: string
  fileName?: string
  startDate?: string
  endDate?: string
}
```
- **响应**:
```typescript
{
  content: TaskHistoryItem[]
  totalElements: number
  totalPages: number
  currentPage: number
}
```

### 11.5 获取任务统计
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `getTaskStatistics()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `GET /api/ai-excel-orders/statistics`
- **响应**:
```typescript
{
  totalTasks: number
  processingTasks: number
  completedTasks: number
  failedTasks: number
  todayTasks?: number
  thisWeekTasks?: number
  thisMonthTasks?: number
}
```

### 11.6 重新处理任务
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `retryTask()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `POST /api/ai-excel-orders/retry/{taskId}`

### 11.7 删除任务
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `deleteTask()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `DELETE /api/ai-excel-orders/task/{taskId}`

### 11.8 获取成功订单列表
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `getSuccessOrders()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelOrderController.java`
- **请求**: `GET /api/ai-excel-orders/{taskId}/success-orders`
- **响应**:
```typescript
{
  content: SuccessOrder[]
  totalElements: number
  totalPages: number
  currentPage: number
}
```

### 11.9 获取失败订单列表
- **前端调用**: `frontend/src/api/aiExcelImport.ts` - `getFailedOrders()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIExcelErrorOrderController.java`
- **请求**: `GET /api/ai-excel-orders/{taskId}/failed-orders`
- **响应**:
```typescript
{
  content: FailedOrder[]
  totalElements: number
  totalPages: number
  currentPage: number
}
```

## 12. 系统监控模块

### 12.1 采集系统信息
- **前端调用**: `frontend/src/api/monitor.ts` - `collectSystemInfo()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/MonitorController.java`
- **请求**: `POST /api/monitor/collect-system-info`
- **响应**: `SystemMetricsDTO`

### 12.2 采集JVM指标
- **前端调用**: `frontend/src/api/monitor.ts` - `collectJVMMetrics()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/MonitorController.java`
- **请求**: `POST /api/monitor/collect-jvm-metrics`
- **响应**: `JVMMetricsDTO`

### 12.3 采集数据库状态
- **前端调用**: `frontend/src/api/monitor.ts` - `collectDatabaseStatus()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/MonitorController.java`
- **请求**: `POST /api/monitor/collect-database-status`
- **响应**: `DatabaseStatusDTO`

### 12.4 获取最新监控数据
- **前端调用**: `frontend/src/api/monitor.ts` - `getLatestData()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/MonitorController.java`
- **请求**: `GET /api/monitor/get-latest-data`
- **响应**: `SystemMetricsDTO`

### 12.5 系统健康检查
- **前端调用**: `frontend/src/api/monitor.ts` - `checkHealth()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/MonitorController.java`
- **请求**: `GET /api/monitor/health`
- **响应**:
```typescript
{
  status: string
  timestamp: string
  details: any
}
```

## 13. 仪表板模块

### 13.1 获取仪表板数据
- **前端调用**: `frontend/src/api/dashboard.ts` - `getDashboardData()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/DashboardController.java`
- **请求**: `GET /api/dashboard`
- **响应**:
```typescript
{
  orderStats: {
    totalOrders: number
    pendingOrders: number
    completedOrders: number
    totalAmount: number
  }
  inventoryStats: {
    totalProducts: number
    lowStockProducts: number
    outOfStockProducts: number
  }
  salesStats: {
    todaySales: number
    weekSales: number
    monthSales: number
  }
}
```

## 14. 订单模板模块

### 14.1 获取订单模板列表
- **前端调用**: `frontend/src/api/orderTemplate.ts` - `getOrderTemplateList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderTemplateController.java`
- **请求**: `GET /api/order-templates`
- **响应**: `OrderTemplate[]`

### 14.2 创建订单模板
- **前端调用**: `frontend/src/api/orderTemplate.ts` - `createOrderTemplate()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderTemplateController.java`
- **请求**: `POST /api/order-templates`
- **请求参数**: `OrderTemplate`

### 14.3 更新订单模板
- **前端调用**: `frontend/src/api/orderTemplate.ts` - `updateOrderTemplate()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderTemplateController.java`
- **请求**: `PUT /api/order-templates/{id}`
- **请求参数**: `OrderTemplate`

### 14.4 删除订单模板
- **前端调用**: `frontend/src/api/orderTemplate.ts` - `deleteOrderTemplate()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/OrderTemplateController.java`
- **请求**: `DELETE /api/order-templates/{id}`

## 15. 工作空间模块

### 15.1 获取工作空间列表
- **前端调用**: `frontend/src/api/workspace.ts` - `getWorkspaceList()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WorkspaceController.java`
- **请求**: `GET /api/workspaces`
- **响应**: `Workspace[]`

### 15.2 创建工作空间
- **前端调用**: `frontend/src/api/workspace.ts` - `createWorkspace()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WorkspaceController.java`
- **请求**: `POST /api/workspaces`
- **请求参数**: `Workspace`

### 15.3 更新工作空间
- **前端调用**: `frontend/src/api/workspace.ts` - `updateWorkspace()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WorkspaceController.java`
- **请求**: `PUT /api/workspaces/{id}`
- **请求参数**: `Workspace`

### 15.4 删除工作空间
- **前端调用**: `frontend/src/api/workspace.ts` - `deleteWorkspace()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/WorkspaceController.java`
- **请求**: `DELETE /api/workspaces/{id}`

## 16. AI管理模块

### 16.1 获取AI配置
- **前端调用**: `frontend/src/api/ai.ts` - `getAIConfig()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIController.java`
- **请求**: `GET /api/ai/config`
- **响应**: `AIConfig`

### 16.2 更新AI配置
- **前端调用**: `frontend/src/api/ai.ts` - `updateAIConfig()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIController.java`
- **请求**: `PUT /api/ai/config`
- **请求参数**: `AIConfig`

### 16.3 测试AI连接
- **前端调用**: `frontend/src/api/ai.ts` - `testAIConnection()`
- **后端接口**: `backend/src/main/java/com/yibang/erp/controller/AIController.java`
- **请求**: `POST /api/ai/test-connection`
- **响应**:
```typescript
{
  success: boolean
  message: string
  responseTime: number
}
```

## 数据模型说明

### 通用分页响应格式
```typescript
{
  records: T[]
  total: number
  current: number
  size: number
  pages: number
}
```

### 通用API响应格式
```typescript
{
  code: number
  message: string
  data: T
  timestamp: string
}
```

### 错误响应格式
```typescript
{
  code: number
  message: string
  error: string
  timestamp: string
  path: string
}
```

## 认证说明

所有API请求（除登录、注册等公开接口外）都需要在请求头中包含JWT Token：

```
Authorization: Bearer <JWT_TOKEN>
```

Token在用户登录成功后返回，需要存储在本地并在每次请求时携带。

## 权限说明

系统采用基于角色的访问控制（RBAC），主要角色包括：
- `SYSTEM_ADMIN`: 系统管理员
- `SUPPLIER_ADMIN`: 供应商管理员
- `SUPPLIER_OPERATOR`: 供应商操作员
- `SALES_ADMIN`: 销售管理员
- `SALES`: 销售员

不同角色对不同的API接口有不同的访问权限，具体权限配置在`SecurityConfig.java`中定义。
